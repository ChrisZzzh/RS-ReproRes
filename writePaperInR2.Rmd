---
title: "writePaperInR"
author: "ChrisZzz"
date: "`r Sys.Date()`"
output:
  html_document:
    df_print: paged
  word_document: default
---
# A header

:toc: true adds a table of contents

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown (this line will be a header)

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.

```{r, echo=FALSE}

```

# Heading 1
## Heading 2
### Heading 3
#### Heading 4

I love **R** (bold)
I love _R_ (italics)

# A header linked to text {#markdown-header}

And a text linked to the header [link to header](#markdown-header)

[link to a website](https://lucidmanager.org/data-science/games-in-r/)

# Lists

1. item 1
2. item 2
3. item 3

1. item 1
    a. use 4 spaces before this for sub-lists
    b. item 2
        i. item 1
        ii. item 2
2. item 2

# inserting images

![Figure caption(write this for accessibility)](img/pathtoanimage.png)

# Tables

| Header 1 | Header 2 |
|----------|----------|
|item1    | item2   |


# Code chunks

Without the {r} syntax, this will print the code and not run it.

```
plot(pressure)
```

# Downloading data from webpages

note: 

include = FALSE doesn't display code OR result, but will run code and store variables and results

echo = FALSE doesn't display code, but will display results

message = FALSE doesn't display messages generated by code chunk

warning -= FALSE doesn't display warnings generated by code chunk

{r label-name} adds a label to the code chunk, and allows easy navigation in the bottom left in the markdown window.

```{r download-data}
download.file(url="https://raw.githubusercontent.com/cambiotraining/reproducibility-training/master/data/gapminder_data.csv", destfile="data/gapminder_data.csv")
```

```{r packages, include=FALSE}
library(tidyverse) #for data manipulation
library(rmarkdown) # for paged_table function
library(kableExtra) # for table
library(ggpubr) # for ggarrange function
```

# Loading and fitering data

codes and returns are hidden for this section.

```{r load-data, include=FALSE}
pop_data <- read.csv("data/gapminder_data.csv")
euro_data_tbl <- pop_data %>%
  
  # keep only data in Europe and year 2007
  filter(continent == "Europe" & year == 2007) %>% 
  
  # get rid of the two columns
  select(-continent, -year) %>% 
  
  # sort by life expectancy descending
  arrange(desc(lifeExp)) %>% 
  
  rename(Country = country, "Population Size" = pop, "LifeExpectancy" = lifeExp, "GDP" = gdpPercap)
```

# Table of data

kabel doesn't work in word but usually works well in html.

```{r, echo=FALSE}

euro_data_tbl %>%
  
  # create a table with kable
  kbl() %>%

  # add striped rows and hover effect when you move mouse over the table
  kable_styling(bootstrap_options = c("striped", "hover"))
```

# Paged table

```{r paged-table, echo=FALSE}
paged_table(euro_data_tbl)
```

# Plotting

this plot shows life expenctancy in Europe throughout the years.

```{r plot-data, echo=FALSE}

# clean data for plotting
euro_data_fig <- pop_data %>%
  
  filter(continent == "Europe") %>%
  
  # this helps in the plotting
  mutate(year=as_factor(year))

# pipe into ggplot
euro_plot <- euro_data_fig %>%
  
  # define axes
  ggplot(aes(x=year, y=lifeExp)) +
  
  # violin plot for each country
  geom_violin() +
  
  stat_summary(fun.y = median, geom = "point")

euro_plot
```



